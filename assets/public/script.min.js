const hs_make_id=t=>{let o="";var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=r.length;for(let e=0;e<t;e++)o+=r.charAt(Math.floor(Math.random()*s));return o},$=jQuery,hs_izi_success_message=function(e,t="",o=!1){t={id:"success",title:t,message:e,displayMode:"once",position:"topCenter",transitionIn:"bounceInLeft",rtl:!0};o&&(t.displayMode="once"),iziToast.success(t)},hs_izi_success=()=>{iziToast.success({title:"is done",rtl:!0,close:!1,icon:"",displayMode:"once",timeout:3400})},hs_izi_question=function(e,t="",o="Yes",r="No",s=!1,n=!1){iziToast.question({timeout:2e4,close:!1,overlay:!0,displayMode:"once",id:"question",zindex:999,title:t,message:e,position:"center",buttons:[["<button>"+o+"</button>",function(e,t){!1!==s&&s(e,t),e.hide({transitionOut:"fadeOut"},t,"button")},!0],["<button>"+r+"</button>",function(e,t){!1!==n&&n(e,t),e.hide({transitionOut:"fadeOut"},t,"button")},!1]]})},hs_izi_error_message=function(e,t="",o,r=!1){console.log(e);t={id:"error",timeout:0,title:t,close:!1,icon:"",message:e,position:"topCenter",transitionIn:"bounceInLeft",rtl:!0};r&&(t.displayMode="once"),iziToast.error(t)},hs_xhr_send_request=function(e,t,o,r=!1,s=!1,n=!1,i="POST",a=!0){var d=new XMLHttpRequest,e=(d.responseType="json",hs_update_query_string_parameter(e,"t",(new Date).getTime()));d.onreadystatechange=function(){4==this.readyState?200==this.status?o(this.response):!1!==r?r(this):hs_izi_error_message(hs_http_status_code(this.status)):!1!==n&&n()},d.onerror=function(e){s?s(e):console.log(e)},d.open(i,e,a),d.send(t)},hs_wc_xhr_send_request=function(e,t,o,r,s="POST"){var n=new XMLHttpRequest;n.responseType="json",n.onreadystatechange=function(){4==this.readyState&&(200==this.status||201==this.status||202==this.status||203==this.status||204==this.status||205==this.status||206==this.status?o(this.response):r(this))},n.onerror=function(e){r(this),console.log(e)},n.open(s,e,!0),n.setRequestHeader("X-WC-Store-API-Nonce",ionVariable["X-WC-Store-API-Nonce"]),n.send(t)},hs_http_status_code=function(e){return"server error: "+{200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status (WebDAV)",208:"Already Reported (WebDAV)",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",306:"(Unused)",307:"Temporary Redirect",308:"Permanent Redirect (experimental)",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot (RFC 2324)",420:"Enhance Your Calm (Twitter)",422:"Unprocessable Entity (WebDAV)",423:"Locked (WebDAV)",424:"Failed Dependency (WebDAV)",425:"Reserved for WebDAV",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",444:"No Response (Nginx)",449:"Retry With (Microsoft)",450:"Blocked by Windows Parental Controls (Microsoft)",451:"Unavailable For Legal Reasons",499:"Client Closed Request (Nginx)",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates (Experimental)",507:"Insufficient Storage (WebDAV)",508:"Loop Detected (WebDAV)",509:"Bandwidth Limit Exceeded (Apache)",510:"Not Extended",511:"Network Authentication Required",598:"Network read timeout error",599:"Network connect timeout error"}[e]},hs_is_data_json=e=>{try{JSON.parse(e)}catch(e){return!1}return!0},hs_update_query_string_parameter=function(e,t,o){var r=new RegExp("([?&])"+t+"=.*?(&|$)","i"),s=-1!==e.indexOf("?")?"&":"?";return e.match(r)?e.replace(r,"$1"+t+"="+o+"$2"):e+s+t+"="+o};function nice_bytes(e){let t=0,o=parseInt(e,10)||0;for(;1024<=o&&++t;)o/=1024;return o.toFixed(o<10&&0<t?1:0)+" "+["bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][t]}const hs_show_loader=(e,t="")=>{ongoing_process=!0,e.classList.add("hs-show-loader"),e.setAttribute("ajax-message",t)},hs_hide_loader=e=>{ongoing_process=!1,e.classList.remove("hs-show-loader")},hs_array_remove=(e,t)=>e.filter(function(e){return e!=t}),hs_get_select_values=e=>{for(var t,o=[],r=e&&e.options,s=0,n=r.length;s<n;s++)(t=r[s]).selected&&o.push(t.value||t.text);return o},hs_get_form_input=e=>{var o=e.querySelectorAll("input,textarea,select"),r=new FormData;for(let t=0;t<o.length;++t)if(o[t].hasAttribute("name")&&null!=o[t].getAttribute("name")&&!("checkbox"===o[t].type&&0==o[t].checked||"radio"===o[t].type&&0==o[t].checked)){let e=o[t].value;"file"===o[t].type&&o[t].files&&o[t].files[0]&&(e=o[t].files[0]),"select-multiple"===o[t].type&&(e=getSelectValues(o[t])),r.append(o[t].getAttribute("name"),e)}JSON.stringify({});return r},hs_to_farsi_number=e=>{var t=["۰","۱","۲","۳","۴","۵","۶","۷","۸","۹"];return e.replace(/[0-9]/g,function(e){return t[+e]})},hs_to_english_number=e=>{var t="۰".charCodeAt(0);return e=e.replace(/[۰-۹]/g,function(e){return e.charCodeAt(0)-t}),t="٠".charCodeAt(0),e=e.replace(/[٠-٩]/g,function(e){return e.charCodeAt(0)-t})},hs_analyze_free_link=e=>{for(var t in e=(e=(e=trim(e)).startsWith("http://")||e.startsWith("https://")?e:"https://"+e).split("?")[0],HbVariable.free_regex){t=new RegExp(HbVariable.free_regex[t],"i");if(e.match(t))return!0}return!1},trim=function(e){return e&&(String.prototype.trim?String.prototype.trim.call(e):e.toString().replace(/^\s*/,"").replace(/\s*$/,""))},toogle_elements=()=>{document.querySelectorAll(".toogle-me").forEach(function(e){""==e.style.display||"none"===e.style.display?e.style.display="block":e.style.display="none"})};function copyToClipboard(e){var t,o;e=e,(t=document.createElement("textArea")).readOnly=!0,t.contentEditable=!0,t.value=e,document.body.appendChild(t),navigator.userAgent.match(/ipad|iphone/i)?((e=document.createRange()).selectNodeContents(t),(o=window.getSelection()).removeAllRanges(),o.addRange(e),t.setSelectionRange(0,999999)):t.select(),document.execCommand("copy"),document.body.removeChild(t),console.log(t.value),hs_izi_success_message("کپی شد")}const hsw=document.querySelector("#hsw"),hs_front_form=document.querySelector("form"),hs_body=document.querySelector("body"),add_product_btn=document.querySelector(".product--add"),main_body=document.querySelector(".main-body"),toggle_fiels=(e,t)=>{document.querySelector(e).style.display="block",document.querySelector(t).style.display="none"},hidden_add_product=()=>{hsw.style.display="none",main_body.style.display="block"},close_video_popup=e=>{e.parentElement.parentElement.style.display="none",e.parentElement.querySelector("video").pause()};let hs_request_free=!1,wait_timer=0,credit_details,ongoing_process=!1;const edit_this_product=e=>{show_add_product_form(e)},show_add_product_form=(e=!1)=>{var t;hsw.style.display="block",main_body.style.display="none",0==e?(t=hs_front_form.querySelectorAll("input"),document.querySelector("#product-images").innerHTML="",t.forEach(e=>{e.name&&(e.value="")}),hs_front_form.querySelector("textarea").value=""):(hs_show_loader(hs_front_form),(t=new FormData).set("action","hamyar_product_edit"),t.set("product_id",e),hs_edit_product(t))},submit_function_selector=(hs_front_form&&hs_front_form.addEventListener("submit",e=>{e.preventDefault(),ongoing_process||((e=hs_front_form.querySelector(".ql-editor"))&&(e.parentElement.parentElement.parentElement.querySelector('[type="hidden"]').value=e.innerHTML),$uploadCrop&&null!==$uploadCrop&&image_changed?$uploadCrop.croppie("result",{type:"canvas",size:"viewport"}).then(function(e){document.querySelector('[name="image-uploader"]').value=e,hs_front_form.submit()}):hs_front_form.submit())}),e=>{("hamyar_wizard_1"===e.get("action")?hs_submit_front_form_wizard1:"hamyar_product"===e.get("action")?hs_submit_product:hs_general_submit)(e)}),hs_submit_product=e=>{try{var t=e.get("name"),o=e.get("description"),r=hs_to_english_number(e.get("price")),s=e.get("sales-price");if(s&&(sales_price=hs_to_english_number(s)),!t||!o||!r)throw new Error("نام و توضحایت  و قیمت الزامی است");if(isNaN(r)||s&&isNaN(sales_price))throw new Error("قیمت یا قیمت فروش ویژه صحیح نمی‌باشد.");var n=hamyar_saz_public._ajax_url;return console.log(e.get("image-uploader")),hs_xhr_send_request(n,e,hs_submit_form_success,hs_submit_form_error,hs_submit_form_error)}catch(e){hs_hide_loader(hs_front_form),hs_izi_error_message(e.message),console.log(e)}},hs_general_submit=e=>{try{var t=hamyar_saz_public._ajax_url;return hs_xhr_send_request(t,e,hs_submit_form_success,hs_submit_form_error,hs_submit_form_error)}catch(e){hs_hide_loader(hs_front_form),hs_izi_error_message(e.message),console.log(e)}},hs_edit_product=e=>{try{var t=hamyar_saz_public._ajax_url;return hs_xhr_send_request(t,e,function(e){if(hs_hide_loader(hs_front_form),e&&e.success&&e.data){var t,o=e.data;for(t in document.querySelector("#product-images").innerHTML="",o){if("images"===t)for(var r in o[t])hs_add_image_to_product(r,o[t][r]);var s=hs_front_form.querySelector('[name="'+t+'"]');s&&(s.value=o[t])}}},hs_submit_form_error,hs_submit_form_error)}catch(e){hs_hide_loader(hs_front_form),hs_izi_error_message(e.message),console.log(e)}},hs_submit_front_form_wizard1=e=>{try{var t,o=e.get("display-name"),r=e.get("username");if(o&&r)return t=hamyar_saz_public._ajax_url,hs_xhr_send_request(t,e,hs_submit_form_success,hs_submit_form_error,hs_submit_form_error);throw new Error("نام کاربری و نام نمایشی الزامی است")}catch(e){hs_hide_loader(hs_front_form),hs_izi_error_message(e.message),console.log(e)}},hs_submit_form_success=response=>{hs_hide_loader(hs_front_form),response&&response.success&&response.data?(response.data.message&&hs_izi_success_message(response.data.message),response.data.html&&(hs_front_form.innerHTML=response.data.html),response.data.javascript&&eval(response.data.javascript)):hs_izi_error_message(response.data.message),console.log(response)},hs_submit_form_error=e=>{var t;hs_hide_loader(hs_front_form),200!==e.status?(t=hs_http_status_code(e.status),hs_izi_error_message(t)):hs_izi_error_message(e.statusText),console.log(e)},hs_next_step=(e,t=0)=>{1!=t&&(window.location.href=hamyar_saz_public._hamyar_saz_url+"?step="+e)},hs_show_video=e=>{e=document.getElementById(e);e.style.display="flex",e.querySelector("video").play()},initialUploadImage=(t,o=null)=>{if(null!=$uploadCrop)return"last";{let e=document.querySelector(t).offsetWidth;return 350<e&&(e=350),o&&o.remove(),$uploadCrop=$(t).croppie({viewport:{width:e-50,height:e-50,type:"square"},boundary:{width:e,height:e},enableExif:!0}),"first"}},initialExistImage=t=>{if(null==$uploadCrop){let e=document.querySelector(t).offsetWidth;350<e&&(e=350),($uploadCrop=$(t).croppie({viewport:{width:e-50,height:e-50,type:"square"},boundary:{width:e,height:e},enableExif:!0})).croppie("bind",{url:document.querySelector("#single-image-url").getAttribute("value")})}};let image_changed=!1;var $uploadCrop=null;$(".upload-image + input").on("change",function(){initialUploadImage("#website-logo",document.querySelector(".websie-logo-img")),readFile(this)}),$(".upload-multi-image + input").on("change",function(){let n=this;n.files&&n.files[0]&&(image_changed=!0,"last"==initialUploadImage("#single-image")&&$uploadCrop&&null!==$uploadCrop?$uploadCrop.croppie("result",{type:"canvas",size:"viewport"}).then(function(e){var t=document.createElement("span"),o=document.createElement("span"),r=document.createElement("img"),s=document.createElement("input");t.setAttribute("class","product-image"),o.innerHTML="&#x2715",o.setAttribute("class","image-remover"),o.setAttribute("onclick","image_remover(this)"),s.setAttribute("type","hidden"),s.setAttribute("name","product-images[]"),s.setAttribute("value",e),r.setAttribute("src",e),t.appendChild(o),t.appendChild(r),t.appendChild(s),document.querySelector("#product-images").appendChild(t),readFile(n)}):readFile(n))}),$(".upload-single-image + input").on("change",function(){this.files&&this.files[0]&&(image_changed=!0,initialUploadImage("#single-image"),readFile(this))});const image_remover=e=>{e.parentElement.remove()};function readFile(e){var t;e.files&&e.files[0]?((t=new FileReader).onload=function(e){$uploadCrop.croppie("bind",{type:"base64",url:e.target.result}).then(function(){console.log("jQuery bind complete")})},t.readAsDataURL(e.files[0])):hs_izi_error_message("Sorry - you're browser doesn't support the FileReader API")}$(".upload-result").on("click",function(e){$uploadCrop.croppie("result",{type:"canvas",size:"viewport"}).then(function(e){popupResult({src:e})})});const hs_add_image_to_product=(e,t)=>{var o=document.createElement("span"),r=document.createElement("span"),s=document.createElement("img"),n=document.createElement("input");o.setAttribute("class","product-image"),r.innerHTML="&#x2715",r.setAttribute("class","image-remover"),r.setAttribute("onclick","image_remover(this)"),n.setAttribute("type","hidden"),n.setAttribute("name","product-images[]"),n.setAttribute("value",e),s.setAttribute("src",t),o.appendChild(r),o.appendChild(s),o.appendChild(n),document.querySelector("#product-images").appendChild(o)};function orderItemHtml(e,t){return $("<div class='display-flex justify-content-between clear-me'><div>"+e+"</div><div>"+t+"</div></div>")}function toggle(e){for(var t=0,o=(checkboxes=document.getElementsByName("foo")).length;t<o;t++){checkboxes[t].checked=e.checked;var r=$(checkboxes[t]).closest(".collection-item");checkboxes[t].checked?($(r).find(".list-content .list-title").css("textDecoration","line-through"),$(r).find(".list-content .list-desc").css("textDecoration","line-through")):($(r).find(".list-content .list-title").css("textDecoration","none"),$(r).find(".list-content .list-desc").css("textDecoration","none"))}}function resizetable(){$(".vertical-layout").length,$(".app-todo .collection").css({maxHeight:$(window).height()-148+"px"})}function order_submit_form_error(e){console.log(e)}$(document).ready(function(){"use strict";$(".dropdown-trigger").dropdown({constrainWidth:!1}),$(".todo-list li").click(function(){var e=$(this);e.hasClass("sidebar-title")||($("li").removeClass("active"),e.addClass("active"))}),$(".sidenav-trigger").on("click",function(){$(window).width()<960&&($(".sidenav").sidenav("close"),$(".app-sidebar").sidenav("close"))}),0<$(".app-todo .collection").length&&new PerfectScrollbar(".app-todo .collection",{theme:"dark"});var e,r=$(".todo-overlay"),s=$(".todo-compose-sidebar"),t=$(".todo-complete"),n=$(".todo-title-label"),i=$(".todo-compose-sidebar .order-date"),a=$(".todo-compose-sidebar .status"),d=s.find("[data-type='order-payment']"),l=s.find("[data-type='order-factor']"),c=s.find("[data-type='order-items']"),u=s.find("[data-type='user-details']"),o=$("label[for='edit-item-form']");$(".todo-sidebar-trigger").on("click",function(){$this=$(this),r.addClass("show"),s.addClass("show"),o.removeClass("active"),t.addClass("hide"),n.html("ویرایش سفارش")}),$(" .todo-compose-sidebar .close-icon, .todo-compose-sidebar .add-todo, .todo-overlay").on("click",function(){r.removeClass("show"),s.removeClass("show")}),$(".todo-compose-sidebar .update-todo").on("click",function(){this.querySelector("span").innerHTML="در حال ذخیره..."}),$(".todo-collection .todo-items").on("click",function(){var e=$(this),t=(s.find(".clear-me").each(function(){$(this).remove()}),s.find(".loader").each(function(){$(this).removeClass("hide")}),e.find(".list-left label").data("order-id")),e=(n.text("ویرایش سفارش "+t),document.querySelector('[name="order-id"]').value=t,i.text(e.find(".list-date").text()),M.FormSelect.getInstance(a).destroy(),a.val(e.find("[data-status]").attr("data-status")).trigger("change"),a.formSelect(),r.addClass("show"),s.addClass("show"),hamyar_saz_public._ajax_url),o=new FormData;o.append("action","hamyar_saz"),o.append("class","getOrder"),o.append("order_id",t),o.append("_nonce",hamyar_saz_public._nonce),hs_xhr_send_request(e,o,function(e){console.log(e),s.find(".loader").each(function(){$(this).addClass("hide")}),$("<div class=' clear-me'>"+e.payment_method_title+"</div>").appendTo(d.parent()),orderItemHtml("نام:",e.billing.first_name).appendTo(u.parent()),orderItemHtml("شماره تماس:",e.billing.phone).appendTo(u.parent()),orderItemHtml("آدرس:",e.shipping.address_1).appendTo(u.parent()),orderItemHtml("جمع کل:",e.total).appendTo(l.parent()),orderItemHtml("میزان تخفیف:",e.discount_total).appendTo(l.parent()),orderItemHtml("مبلغ پرداختی:",e.total).appendTo(l.parent()),e.item_details.forEach(function(e){orderItemHtml(e.quantity+" * "+e.name,e.price).appendTo(c.parent())})},order_submit_form_error,order_submit_form_error)}),t.on("click",function(){e.parent().find("input[type=checkbox]").prop("checked",!0),e.parent().find(".list-content .list-title").css("textDecoration","line-through"),e.parent().find(".list-content .list-desc").css("textDecoration","line-through")}),0<s.length&&new PerfectScrollbar(".todo-compose-sidebar",{theme:"dark",wheelPropagation:!1})}),$(window).on("resize",function(){resizetable(),$(".todo-compose-sidebar").removeClass("show"),$(".todo-overlay").removeClass("show"),899<$(window).width()&&$("#todo-sidenav").removeClass("sidenav"),$(window).width()<900&&$("#todo-sidenav").addClass("sidenav")}),resizetable();